!function(){let idleMonster,wizardIdleAnim,loaderContext,loaderCanvas,loaderBackgroundCanvas,loaderBackgroundCanvasContext,runLoader=!0,wizardIdleAnimRun=!0,wizardAttackAnimRun=!1,attackAnimationRun=!1,spinAttackAnimationRun=!1,walkAnimationRun=!1,tauntAnimationRun=!1,dungeonTileSet2=new Image;dungeonTileSet2.src="assets/tiles/0x72_DungeonTilesetII_v1.3.1/0x72_DungeonTilesetII_v1.3.png";let wizardIdle=new Image;wizardIdle.src="assets/images/Wizard Pack/Idle.png";let wizardAttack=new Image;wizardAttack.src="assets/images/Wizard Pack/Attack1.png";let wizardSpeechBubble=new Image;wizardSpeechBubble.src="assets/images/Wizard Pack/wizard_speech_bubble.png";let wallMid=new Image;wallMid.src="assets/tiles/wall_mid.png";let wallCornerRight=new Image;wallCornerRight.src="assets/tiles/wall_corner_right.png";let wallTopMid=new Image;wallTopMid.src="assets/tiles/wall_top_mid.png";let mainCharIdle=new Image;mainCharIdle.src="assets/images/mainChar/spr_Idle_strip.png";let mainCharWalking=new Image;mainCharWalking.src="assets/images/mainChar/spr_Walk_strip.png";let mainCharAttacking=new Image;mainCharAttacking.src="assets/images/mainChar/spr_Attack_strip.png";let mainCharTaunting=new Image;mainCharTaunting.src="assets/images/mainChar/spr_Taunt_strip.png";let mainCharSpinAttacking=new Image;mainCharSpinAttacking.src="assets/images/mainChar/spr_SpinAttack_strip.png";let middleRoomRectMinSize=[18,9],middleRoomRectMaxSize=[],topRoomRectMinSize=[18,9],topRoomRectMaxSize=[],bottomRoomRectMinSize=[18,9],bottomRoomRectMaxSize=[],leftRoomRectMinSize=[9,18],leftRoomRectMaxSize=[],rightRoomRectMinSize=[9,18],rightRoomRectMaxSize=[];function mainLoop(){mainUpdate(),mainDraw(),wizardIdleAnimRun&&mainCanvasContext.drawImage(wizardSpeechBubble,0,0,1071,234,20,mainCanvas.height-190,300,50),requestAnimationFrame(mainLoop)}function mainUpdate(){mainCharacter.update(),wizardIdleAnimRun&&wizardIdleAnim.update(),wizardAttackAnimRun&&wizardAttackAnim.update()}function mainDraw(){mainCanvasContext.clearRect(0,0,mainCanvas.width,mainCanvas.height),mainCharacter.draw(mainCanvasContext),attackAnimationRun&&29===mainCharacter.frameIndex&&(attackAnimationRun=!1,mainCharacter=new GameObject(mainCharIdle,0,0,2720,96,50,16,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY)),walkAnimationRun&&7===mainCharacter.frameIndex&&(walkAnimationRun=!1,mainCharacter=new GameObject(mainCharIdle,0,0,2720,96,50,16,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY)),tauntAnimationRun&&17===mainCharacter.frameIndex&&(tauntAnimationRun=!1,mainCharacter=new GameObject(mainCharIdle,0,0,2720,96,50,16,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY)),spinAttackAnimationRun&&29===mainCharacter.frameIndex&&(spinAttackAnimationRun=!1,mainCharacter=new GameObject(mainCharIdle,0,0,2720,96,50,16,mainCharacter.canvasCoordinateX+32,mainCharacter.canvasCoordinateY)),wizardIdleAnimRun&&wizardIdleAnim.draw(mainCanvasContext),wizardAttackAnimRun&&(wizardAttackAnim.draw(mainCanvasContext),7===wizardAttackAnim.frameIndex&&(wizardAttackAnimRun=!1,window.location.href="/index_classic.html"))}function loaderLoop(){updateLoader(),drawLoader(),setTimeout((function(){runLoader=!1}),2500),!0===runLoader?requestAnimationFrame(loaderLoop):(loaderCanvas.classList.add("fadeOut"),loaderBackgroundCanvas.classList.add("fadeOut"),mainLoop())}function drawBackgroundOnImagesLoad(backgroundCanvasContext,floorImage,i,j){backgroundCanvasContext.drawImage(floorImage,0,0,16,16,16*j,16*i,16,16)}window.onload=function(){let floorImages=[],floor_1_img=new Image;floor_1_img.src="assets/tiles/floor_1.png",floorImages.push(floor_1_img);var floor_2_img=new Image;floor_2_img.src="assets/tiles/floor_2.png",floorImages.push(floor_2_img);var floor_3_img=new Image;floor_3_img.src="assets/tiles/floor_3.png",floorImages.push(floor_3_img);var floor_4_img=new Image;floor_4_img.src="assets/tiles/floor_4.png",floorImages.push(floor_4_img);var floor_5_img=new Image;floor_5_img.src="assets/tiles/floor_5.png",floorImages.push(floor_5_img);var floor_6_img=new Image;floor_6_img.src="assets/tiles/floor_6.png",floorImages.push(floor_6_img);var floor_7_img=new Image;floor_7_img.src="assets/tiles/floor_7.png",floorImages.push(floor_7_img);var floor_8_img=new Image;floor_8_img.src="assets/tiles/floor_8.png",floorImages.push(floor_8_img),middleRoomRectMaxSize[0]=Math.ceil(window.innerWidth/5/16),middleRoomRectMaxSize[1]=Math.ceil(middleRoomRectMaxSize[0]/2/16),topRoomRectMaxSize[0]=Math.ceil(window.innerWidth/5/16),topRoomRectMaxSize[1]=Math.ceil(topRoomRectMaxSize[0]/2/16),bottomRoomRectMaxSize[0]=Math.ceil(window.innerWidth/5/16),bottomRoomRectMaxSize[1]=Math.ceil(bottomRoomRectMaxSize[0]/2/16),leftRoomRectMaxSize[0]=Math.ceil(window.innerWidth/5/16),leftRoomRectMaxSize[1]=Math.ceil(leftRoomRectMaxSize[0]/2/16),rightRoomRectMaxSize[0]=Math.ceil(window.innerWidth/5/16),rightRoomRectMaxSize[1]=Math.ceil(rightRoomRectMaxSize[0]/2/16),loaderBackgroundCanvas=document.querySelector(".loaderBackgroundCanvas"),loaderBackgroundCanvasContext=loaderBackgroundCanvas.getContext("2d"),loaderBackgroundCanvas.width=window.innerWidth,loaderBackgroundCanvas.height=window.innerHeight,floor_1_img.onload=function(){let pattern=loaderBackgroundCanvasContext.createPattern(floor_1_img,"repeat");loaderBackgroundCanvasContext.fillStyle=pattern,loaderBackgroundCanvasContext.fillRect(0,0,loaderBackgroundCanvas.width,loaderBackgroundCanvas.height)},loaderCanvas=document.querySelector(".loader"),loaderContext=loaderCanvas.getContext("2d"),loaderCanvas.width=window.innerWidth,loaderCanvas.height=window.innerHeight,backgroundCanvas=document.querySelector("#tilemapBackground"),backgroundCanvasContext=backgroundCanvas.getContext("2d"),backgroundCanvas.width=window.innerWidth,backgroundCanvas.height=window.innerHeight,mainCanvas=document.querySelector("#tilemapMainGame"),mainCanvasContext=mainCanvas.getContext("2d"),mainCanvas.width=window.innerWidth,mainCanvas.height=window.innerHeight;let columns=Math.ceil(window.innerWidth/16),rows=Math.ceil(window.innerHeight/16),tilemapMatrix=[];middleRoomRectMinSize[2]=Math.ceil(columns/2-middleRoomRectMinSize[0]/2),middleRoomRectMinSize[3]=Math.ceil(rows/2-middleRoomRectMinSize[1]/2),floorImages[floorImages.length-1].onload=function(){for(i=0;i<rows;i++)for(tilemapMatrix[i]=[],j=0;j<columns;j++){let randomNum=Math.random();if(7!=i||0!=j&&1!=j&&2!=j&&3!=j&&4!=j)if(4!=j||0!=i&&1!=i&&2!=i&&3!=i&&4!=i&&5!=i&&6!=i&&7!=i)if(j>=middleRoomRectMinSize[2]&&j<=middleRoomRectMinSize[2]+middleRoomRectMinSize[0]&&i==middleRoomRectMinSize[3]||i>=middleRoomRectMinSize[3]&&i<=middleRoomRectMinSize[3]+middleRoomRectMinSize[1]&&j==middleRoomRectMinSize[2]||j>=middleRoomRectMinSize[2]&&j<=middleRoomRectMinSize[2]+middleRoomRectMinSize[0]&&i==middleRoomRectMinSize[3]+middleRoomRectMinSize[1]||i>=middleRoomRectMinSize[3]&&i<=middleRoomRectMinSize[3]+middleRoomRectMinSize[1]&&j==middleRoomRectMinSize[2]+middleRoomRectMinSize[0])tilemapMatrix[i].push(wallMid),drawBackgroundOnImagesLoad(backgroundCanvasContext,wallMid,i,j),drawBackgroundOnImagesLoad(backgroundCanvasContext,wallTopMid,i-1,j);else if(randomNum<=.9&&randomNum>=0)tilemapMatrix[i].push(floorImages[0]),drawBackgroundOnImagesLoad(backgroundCanvasContext,floorImages[0],i,j);else{let randomTile=Math.floor(Math.random()*Math.floor(6)+1);tilemapMatrix[i].push(floorImages[randomTile]),drawBackgroundOnImagesLoad(backgroundCanvasContext,floorImages[randomTile],i,j)}else tilemapMatrix[i].push(wallCornerRight),drawBackgroundOnImagesLoad(backgroundCanvasContext,wallCornerRight,i,j);else tilemapMatrix[i].push(wallMid),drawBackgroundOnImagesLoad(backgroundCanvasContext,wallMid,i,j),drawBackgroundOnImagesLoad(backgroundCanvasContext,wallTopMid,i-1,j)}},idleMonster=new GameObject(dungeonTileSet2,16,364,128,36,90,4),mainCharacter=new GameObject(mainCharIdle,0,0,2720,96,50,16),wizardIdleAnim=new GameObject(wizardIdle,0,0,1386,190,90,6,1,mainCanvas.height-190),wizardAttackAnim=new GameObject(wizardAttack,0,0,1848,190,90,8,1,mainCanvas.height-190),animateLoadWriting(),loaderLoop(),document.querySelector(".swordBurgerMenu").addEventListener("click",(function(){this.classList.toggle("open"),document.querySelector(".navigation").classList.toggle("open"),document.querySelector(".settings").classList.remove("open"),document.querySelector(".gearSettings").classList.remove("open")})),document.querySelector(".gearSettings").addEventListener("click",(function(){this.classList.toggle("open"),document.querySelector(".settings").classList.toggle("open"),document.querySelector(".navigation").classList.remove("open"),document.querySelector(".swordBurgerMenu").classList.remove("open")})),document.querySelector("#tilemapMainGame").addEventListener("click",(function(event){pointIsInClickableRectangle(wizardIdleAnim,event)&&(wizardIdleAnimRun=!1,wizardAttackAnimRun=!0)})),document.onkeydown=function(e){switch(e.which){case 37:walkAnimationRun=!0,mainCharacter=new GameObject(mainCharWalking,0,0,1360,96,50,8,mainCharacter.canvasCoordinateX-16,mainCharacter.canvasCoordinateY);break;case 38:walkAnimationRun=!0,mainCharacter=new GameObject(mainCharWalking,0,0,1360,96,50,8,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY-16);break;case 39:walkAnimationRun=!0,mainCharacter=new GameObject(mainCharWalking,0,0,1360,96,50,8,mainCharacter.canvasCoordinateX+16,mainCharacter.canvasCoordinateY);break;case 40:walkAnimationRun=!0,mainCharacter=new GameObject(mainCharWalking,0,0,1360,96,50,8,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY+16);break;case 65:attackAnimationRun=!0,mainCharacter=new GameObject(mainCharAttacking,0,0,5100,96,50,30,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY);break;case 84:tauntAnimationRun=!0,mainCharacter=new GameObject(mainCharTaunting,0,0,3060,96,50,18,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY);break;case 83:spinAttackAnimationRun=!0,mainCharacter=new GameObject(mainCharSpinAttacking,0,0,5100,96,50,30,mainCharacter.canvasCoordinateX,mainCharacter.canvasCoordinateY);break;default:return}e.preventDefault()}};let counter=0;function animateLoadWriting(){let loadingWriting=document.querySelector(".loadWriting"),loaderWritingLetters=document.getElementsByClassName("letter"),loaderWritingChildCount=loadingWriting.childElementCount;setTimeout((function(){loaderWritingLetters[counter].classList.add("fadeInZoom"),counter++,counter<loaderWritingChildCount?animateLoadWriting():setTimeout((function(){loadingWriting.classList.add("fadeOut")}),1200)}),2500/(loaderWritingChildCount+6))}function updateLoader(){idleMonster.update()}function drawLoader(){loaderContext.clearRect(0,0,loaderCanvas.width,loaderCanvas.height),idleMonster.draw(loaderContext)}function GameObject(spritesheet,x,y,width,height,timePerFrame,numberOfFrames,canvasCoordinateX=0,canvasCoordinateY=0){this.spritesheet=spritesheet,this.x=x,this.y=y,this.width=width,this.height=height,this.timePerFrame=timePerFrame,this.numberOfFrames=numberOfFrames||1,this.canvasCoordinateX=canvasCoordinateX,this.canvasCoordinateY=canvasCoordinateY,0===this.canvasCoordinateX&&(this.canvasCoordinateX=Math.round(loaderCanvas.width/2-this.width/this.numberOfFrames/2)),0===canvasCoordinateY&&(this.canvasCoordinateY=Math.round(loaderCanvas.height/2-this.height/2)),this.frameIndex=0,this.lastUpdate=Date.now(),this.update=function(){Date.now()-this.lastUpdate>=this.timePerFrame&&(this.frameIndex++,this.frameIndex>=this.numberOfFrames&&(this.frameIndex=0),this.lastUpdate=Date.now())},this.draw=function(context){context.drawImage(this.spritesheet,this.frameIndex*this.width/this.numberOfFrames+x,y,this.width/this.numberOfFrames,this.height,this.canvasCoordinateX,this.canvasCoordinateY,this.width/this.numberOfFrames,this.height)}}function pointIsInClickableRectangle(clickableFigure,eventObject){let width=clickableFigure.width/clickableFigure.numberOfFrames,height=clickableFigure.height,centerPoint=[];return centerPoint.x=clickableFigure.canvasCoordinateX+width/2,centerPoint.y=clickableFigure.canvasCoordinateY+height/2,eventObject.clientX>centerPoint.x-width&&eventObject.clientX<centerPoint.x+width&&eventObject.clientY>centerPoint.y-height&&eventObject.clientY<centerPoint.y+height}}();